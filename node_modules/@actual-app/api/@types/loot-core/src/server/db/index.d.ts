import { Database } from '@jlongster/sql.js';
import { TransactionEntity } from '../../types/models';
import { WithRequired } from '../../types/util';
import { DbAccount, DbBank, DbCategory, DbCategoryGroup, DbPayee, DbTag, DbTransaction, DbViewTransaction } from './types';
export * from './types';
export { toDateRepr, fromDateRepr } from '../models';
export declare function getDatabasePath(): string;
export declare function openDatabase(id?: string): Promise<void>;
export declare function closeDatabase(): Promise<void>;
export declare function setDatabase(db_: Database): void;
export declare function getDatabase(): {
    close(): void;
    create_function(name: string, func: (...args: any[]) => any): /*elided*/ any;
    each(sql: string, params: import("@jlongster/sql.js").BindParams, callback: import("@jlongster/sql.js").ParamsCallback, done: () => void): /*elided*/ any;
    each(sql: string, callback: import("@jlongster/sql.js").ParamsCallback, done: () => void): /*elided*/ any;
    exec(sql: string, params?: import("@jlongster/sql.js").BindParams): import("@jlongster/sql.js").QueryExecResult[];
    export(): Uint8Array;
    getRowsModified(): number;
    handleError(): null | never;
    iterateStatements(sql: string): {
        getRemainingSql(): string;
        next(): import("@jlongster/sql.js").StatementIteratorResult;
        [Symbol.iterator](): Iterator<{
            bind(values?: import("@jlongster/sql.js").BindParams): boolean;
            free(): boolean;
            freemem(): void;
            get(params?: import("@jlongster/sql.js").BindParams): import("@jlongster/sql.js").SqlValue[];
            getAsObject(params?: import("@jlongster/sql.js").BindParams): import("@jlongster/sql.js").ParamsObject;
            getColumnNames(): string[];
            getNormalizedSQL(): string;
            getSQL(): string;
            reset(): void;
            run(values?: import("@jlongster/sql.js").BindParams): void;
            step(): boolean;
        }>;
    };
    prepare(sql: string, params?: import("@jlongster/sql.js").BindParams): {
        bind(values?: import("@jlongster/sql.js").BindParams): boolean;
        free(): boolean;
        freemem(): void;
        get(params?: import("@jlongster/sql.js").BindParams): import("@jlongster/sql.js").SqlValue[];
        getAsObject(params?: import("@jlongster/sql.js").BindParams): import("@jlongster/sql.js").ParamsObject;
        getColumnNames(): string[];
        getNormalizedSQL(): string;
        getSQL(): string;
        reset(): void;
        run(values?: import("@jlongster/sql.js").BindParams): void;
        step(): boolean;
    };
    run(sql: string, params?: import("@jlongster/sql.js").BindParams): /*elided*/ any;
};
export declare function loadClock(): Promise<void>;
export declare function runQuery(sql: string, params?: Array<string | number>, fetchAll?: false): {
    changes: unknown;
};
export declare function runQuery<T>(sql: string, params: Array<string | number> | undefined, fetchAll: true): T[];
export declare function execQuery(sql: string): void;
export declare function cache(sql: string): string;
export declare function transaction(fn: () => void): void;
export declare function asyncTransaction(fn: () => Promise<void>): Promise<void>;
export declare function all<T>(sql: string, params?: (string | number)[]): Promise<T[]>;
export declare function first<T>(sql: any, params?: (string | number)[]): Promise<T>;
export declare function firstSync<T>(sql: any, params?: (string | number)[]): T;
export declare function run(sql: any, params?: (string | number)[]): Promise<{
    changes: unknown;
}>;
export declare function select(table: any, id: any): Promise<any>;
export declare function update(table: any, params: any): Promise<void>;
export declare function insertWithUUID(table: any, row: any): Promise<any>;
export declare function insert(table: any, row: any): Promise<void>;
export declare function delete_(table: any, id: any): Promise<void>;
export declare function deleteAll(table: string): Promise<void>;
export declare function selectWithSchema(table: any, sql: any, params: any): Promise<any[]>;
export declare function selectFirstWithSchema(table: any, sql: any, params: any): Promise<any>;
export declare function insertWithSchema(table: any, row: any): Promise<any>;
export declare function updateWithSchema(table: any, fields: any): Promise<void>;
export declare function getCategories(ids?: Array<DbCategory['id']>): Promise<DbCategory[]>;
export declare function getCategoriesGrouped(ids?: Array<DbCategoryGroup['id']>): Promise<Array<DbCategoryGroup & {
    categories: DbCategory[];
}>>;
export declare function insertCategoryGroup(group: WithRequired<Partial<DbCategoryGroup>, 'name'>): Promise<DbCategoryGroup['id']>;
export declare function updateCategoryGroup(group: WithRequired<Partial<DbCategoryGroup>, 'name' | 'is_income'>): Promise<void>;
export declare function moveCategoryGroup(id: DbCategoryGroup['id'], targetId: DbCategoryGroup['id']): Promise<void>;
export declare function deleteCategoryGroup(group: Pick<DbCategoryGroup, 'id'>, transferId?: DbCategory['id']): Promise<void>;
export declare function insertCategory(category: WithRequired<Partial<DbCategory>, 'name' | 'cat_group'>, { atEnd }?: {
    atEnd?: boolean | undefined;
}): Promise<DbCategory['id']>;
export declare function updateCategory(category: WithRequired<Partial<DbCategory>, 'name' | 'is_income' | 'cat_group'>): Promise<void>;
export declare function moveCategory(id: DbCategory['id'], groupId: DbCategoryGroup['id'], targetId: DbCategory['id'] | null): Promise<void>;
export declare function deleteCategory(category: Pick<DbCategory, 'id'>, transferId?: DbCategory['id']): Promise<void>;
export declare function getPayee(id: DbPayee['id']): Promise<DbPayee>;
export declare function getAccount(id: DbAccount['id']): Promise<DbAccount>;
export declare function insertPayee(payee: WithRequired<Partial<DbPayee>, 'name'>): Promise<string>;
export declare function deletePayee(payee: Pick<DbPayee, 'id'>): Promise<void>;
export declare function deleteTransferPayee(payee: Pick<DbPayee, 'id'>): Promise<void>;
export declare function updatePayee(payee: WithRequired<Partial<DbPayee>, 'id'>): Promise<void>;
export declare function mergePayees(target: DbPayee['id'], ids: Array<DbPayee['id']>): Promise<void>;
export declare function getPayees(): Promise<(DbPayee & {
    name: DbAccount["name"] | DbPayee["name"];
})[]>;
export declare function getCommonPayees(): Promise<never[]>;
export declare function syncGetOrphanedPayees(): Promise<Pick<DbPayee, "id">[]>;
export declare function getOrphanedPayees(): Promise<string[]>;
export declare function getPayeeByName(name: DbPayee['name']): Promise<DbPayee>;
export declare function getAccounts(): Promise<(DbAccount & {
    bankName: DbBank["name"];
    bankId: DbBank["id"];
})[]>;
export declare function insertAccount(account: any): Promise<any>;
export declare function updateAccount(account: any): Promise<void>;
export declare function deleteAccount(account: any): Promise<void>;
export declare function moveAccount(id: DbAccount['id'], targetId: DbAccount['id'] | null): Promise<void>;
export declare function getTransaction(id: DbViewTransaction['id']): Promise<any>;
export declare function getTransactions(accountId: DbTransaction['acct']): Promise<any[]>;
export declare function insertTransaction(transaction: any): Promise<TransactionEntity['id']>;
export declare function updateTransaction(transaction: any): Promise<void>;
export declare function deleteTransaction(transaction: any): Promise<void>;
export declare function getTags(): Promise<DbTag[]>;
export declare function getAllTags(): Promise<DbTag[]>;
export declare function insertTag(tag: any): Promise<DbTag['id']>;
export declare function deleteTag(tag: any): Promise<void>;
export declare function updateTag(tag: any): Promise<void>;
export declare function findTags(): Promise<{
    notes: string;
}[]>;
